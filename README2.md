# Лабораторная работа №13  
## Графический интерфейс для ЛР12 (транспортная компания)

Вариант: 1  

---

## Цель работы

Разработать графический пользовательский интерфейс (GUI) для задач лабораторной работы №12 на языке Python с использованием библиотеки DearPyGUI. Приложение должно обеспечивать удобное управление клиентами, транспортными средствами и результатами распределения грузов.  

---

## Структура репозитория

Репозиторий основан на решении ЛР12 и дополнен для ЛР13:

- main.py — консольный интерфейс для работы с транспортной компанией (ЛР2/12).  
- main_gui.py — графический интерфейс для ЛР12 (ЛР13).  
- transport/ — пакет с бизнес‑логикой:  
  - client.py — класс Client (клиенты компании).  
  - vehicle.py — базовый класс Vehicle.  
  - truck.py — класс Truck (грузовик).  
  - train.py — класс Train (поезд).  
  - company.py — класс TransportCompany (транспортная компания, оптимизация распределения грузов).  
- Прочие файлы (тесты, настройки и т.п.) — по структуре ЛР12.  

---

## Функционал графического интерфейса

### Главное окно

Главное окно “LR12 / LR13 – GUI version” содержит:

- Меню  
  - File → Export result — сохранение результатов распределения грузов в текстовый файл distribution_result.txt (перед экспортом выполняется проверка наличия результатов).
  - Help → About — модальное окно с информацией о лабораторной работе

- Панель управления объектами  
  - Add client — открыть окно добавления/редактирования клиента.  
  - Add vehicle — открыть окно добавления/редактирования транспортного средства.  
  - Distribute cargo — запуск оптимизации распределения грузов (метод optimize_cargo_distribution() класса `TransportCompany`).
  - Delete client — удаление клиента (в учебной реализации — последнего в списке).  
  - Delete vehicle — удаление транспортного средства (последнего в списке).  

- Таблица клиентов (`Clients`)  
  - Отображаются поля: имя клиента, вес груза (кг), статус VIP.  
  - Таблица автоматически обновляется после добавления, редактирования и удаления клиентов.  

- Таблица транспортных средств (`Vehicles`)  
  - Отображаются поля: ID, тип транспорта (Truck/Train), грузоподъёмность (тонн), текущая загрузка (тонн).  
  - Таблица обновляется после операций с транспортом и после оптимизации распределения. 

- Лог и статусная строка  
  - Поле Log — многострочное текстовое поле для вывода сообщений о действиях пользователя, результатах распределения и возможных ошибках.  
  - Статусная строка внизу окна отображает краткое состояние приложения (успешные операции, предупреждения, ошибки).  

---

## Окно клиента

Окно Client используется для добавления и редактирования клиентов:

- Поля ввода  
  - Client name — имя клиента (обязательное текстовое поле).  
  - Cargo weight (kg) — вес груза в килограммах (обязательное числовое поле).  
  - VIP client — чекбокс VIP‑статуса (по умолчанию отключён).  

- Кнопки  
  - Save — сохранить данные клиента.  
  - Cancel — закрыть окно без сохранения.  

- Валидация  
  - Имя клиента:
    - минимум 2 символа;
    - только буквы (русские или латинские).  
  - Вес груза:
    - строго больше 0;
    - не более 10000 кг.  

При некорректном вводе отображается модальное окно с текстом ошибки, поле ввода сбрасывается, а в статусной строке выводится предупреждение.

---

## Окно транспортного средства

Окно Vehicle используется для добавления и редактирования транспортных средств:

- Поля ввода  
  - Vehicle type — выпадающий список с вариантами Truck и Train.  
  - Capacity (t) — грузоподъёмность в тоннах (обязательное числовое поле).  
  - Number of cars (for Train) — количество вагонов (используется для типа `Train`).  

- Кнопки  
  - Save — сохранить данные транспортного средства.  
  - Cancel — закрыть окно без сохранения.  

- Валидация  
  - Грузоподъёмность: строго больше 0.  
  - Количество вагонов: целое число больше 0 (только для поезда).
Ошибки ввода также сопровождаются модальным окном с объяснением и сбросом некорректных полей.

---

## Основные действия пользователя

1. Добавление клиента  
   1. Нажать кнопку Add client.  
   2. В окне Client заполнить имя, вес груза и при необходимости отметить VIP client.  
   3. Нажать Save. После успешной валидации клиент добавляется в список clients и в коллекцию company.clients, таблица клиентов обновляется.  

2. Добавление транспортного средства  
   1. Нажать кнопку Add vehicle.  
   2. В окне Vehicle выбрать тип (`Truck`/`Train`), указать грузоподъёмность и, при типе Train, количество вагонов.  
   3. Нажать Save. Объект Truck или Train добавляется в список vehicles и в company.vehicles, таблица транспортных средств обновляется.  

3. Редактирование объектов  
   - В учебной реализации предусмотрена логика редактирования по индексу (через сохранение текущего индекса клиента/ТС), которая может быть связана с выбором строки таблицы.  

4. Удаление объектов  
   - Кнопка Delete client удаляет одного клиента (последний в списке) и синхронизирует изменения с TransportCompany.  
   - Кнопка Delete vehicle аналогично удаляет одно транспортное средство.  

5. Оптимизация распределения грузов  
   - Нажать кнопку Distribute cargo.  
   - Создаётся/используется объект TransportCompany, в который передаются текущие списки клиентов и транспортных средств.  
   - Вызывается метод optimize_cargo_distribution():
     - VIP‑клиенты распределяются в первую очередь.  
     - Используется жадный подход: сначала максимально заполняется первое подходящее транспортное средство, затем следующее, что позволяет задействовать как можно меньше транспорта. 
   - После выполнения:
     - В таблице транспортных средств обновляются значения текущей загрузки.  
     - В лог выводится подробный текстовый отчёт (транспорт + список загруженных клиентов).  

6. Экспорт результатов (Задание 3)  
   - В меню выбрать File → Export result.  
   - При наличии результатов распределения они сохраняются в файл distribution_result.txt в корне репозитория.  
   - В статусной строке и в логе выводится сообщение об успешном сохранении либо об отсутствии данных для экспорта.

---
